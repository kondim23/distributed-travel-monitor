Προγραμματισμός Συστήματος 2020-2021
Εργασία 2 
Κωνσταντίνος Δημητρακόπουλος 
ΑΜ: 1115201500034

travelMonitor.c:

Αρχικά δηλώνονται οι κατάλληλες ενέργειες για τους signals SIGINT, SIGQUIT, SIGCHLD. Τα set συμπληρώνονται με 
sigfillset. Κατα τα SIGINT, SIGQUIT καλείται η changeStatus_running όπου αλλάζει τη τιμή της μεταβλητής running σε 0
ώστε κατα τον επόμενο έλεγχο της το πρόγραμμα να μεταβεί σε κατάσταση τερματισμού. Κατα το SIGCHLD καλείται η
recreateChild για τη δημιουργία του νέου monitor.

Ο έλεγχος της μεταβλητής running  γίνεται κατάλληλα ώστε να μην διακοπεί μια εντολή ενός χρήστη πριν αυτή ολοκληρωθεί.
Συγκεκριμένα, γίνεται ακριβώς πριν και κατα την αναμονή του χρήστη για εντολή, αλλα και κατα την recreateChild ώστε 
να διαπιστωθεί αν το σημα SIGCHLD που έλαβε το parent process ήταν απο αποστολή σήματος SIGKILL απο το ίδιο το parent 
process στο monitor ή οχι.

Έπειτα γίνεται έλεγχος ορισμάτων του χρήστη, δημιουργουνται 2 pipes για καθε monitor (READ,WRITE) και γίνεται fork το 
κάθε monitor. Κατα την πρώτη εγγραφή-ανάγνωση στο pipe μεταβιβάζεται ένας integer (sizeof(int) bytes) που δηλώνει το
buffersize. Οι επόμενες εγγραφές-αναγνώσεις απο pipes γίνονται με τμήματα μεγέθους buffersize.

Επιπρόσθετα, μεταφέρεται το bloomsize στα monitors, διαβάζονται τα περιεχόμενα του inputDir, διαμοιράζονται οι 
κατάλογοι των χωρών στα monitors (round robin alphabetically), στέλνεται πληροφορία _COUNTRIES_END, γίνεται λήψη των
bloom filters απο ta monitors με χρήση της poll ώστε να μην αναμένουμε κάποιο pipe να γράψει δεδομένα ενώ κάποιο άλλο
έχει τελειώσει το γράψιμο.